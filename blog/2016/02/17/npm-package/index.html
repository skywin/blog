<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="UTF-8">
  <title>npm package.json属性详解 | 邹成卓的个人网站</title>
  <meta name="viewport" content="width=device-width,height=device-height,user-scalable=0">
  <meta name="email" content="405966530@qq.com">
  <meta name="description" content="概述本文档的内容是package.json配置里边的属性含义。package.json必须是一个严格的json文件，而不仅仅是js里边的一个对象。其中很多属性可以通过npm-config来生成。   namepackage.json中最重要的属性是name和version两个属性，这两个属性是必须要">
  <meta property="og:type" content="article">
  <meta property="og:title" content="npm package.json属性详解 | 邹成卓的个人网站">
  <meta property="og:url" content="http://www.zoucz.com/blog/2016/02/17/npm-package/">
  <meta property="og:site_name" content="npm package.json属性详解">
  <meta property="og:description" content="概述本文档的内容是package.json配置里边的属性含义。package.json必须是一个严格的json文件，而不仅仅是js里边的一个对象。其中很多属性可以通过npm-config来生成。   namepackage.json中最重要的属性是name和version两个属性，这两个属性是必须要">
  <link rel="shoticon" href="http://www.zoucz.com/favicon.ico" type="image/x-icon">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="renderer" content="webkit">
  <link href="http://www.zoucz.com/blogimgs/app-icon.png" rel="apple-touch-icon-precomposed">
  <link rel="alternate" type="application/rss+xml" href="http://www.zoucz.com/atom.xml" title="邹成卓的个人网站" />
  <link rel="stylesheet" href="/public/css/style.css?v=20151229" type="text/css">
  <script src="/public/js/jquery.js" type="text/javascript"></script>
  <script src="/public/js/main.js?v=20151229" type="text/javascript"></script>
</head>

<body>
    <div class="rainbow"></div>
    <div class="container">
  <div class="article" itemscope itemtype="http://schema.org/Article">
    <div class="post">
      <div class="post-title-wrapper">
        <h1 class="post-title" itemprop="name">npm package.json属性详解</h1>
        <a href="/entry/"><img src="/blogimgs/avatar150.png" alt="邹成卓" /></a>
      </div>
      <div class="post-info">
        <span>作者: <a href="/about/" itemprop="author">邹成卓</a></span>
        <span><time itemprop="timeCreated">2016-02-17 09:28:04</time></span>
        <span>分类: 
	<a class="category-link" href="/blog/categories/nodejs/">nodejs</a>

</span>
        <span>标签: 
<a class="article-tag-link" href="/blog/tags/nodejs/">nodejs</a>, <a class="article-tag-link" href="/blog/tags/npm/">npm</a>
</span>
        <span>评论数: <a href="#comments"
                      class="ds-thread-count hash-to-comments disqus-comment-count"
                      data-thread-key="npm-package"
                      data-disqus-identifier="npm-package"></a></span>
      </div>
      <div class="post-content" itemprop="articleBody">
        <div class="shit-spider" title="防爬虫不注明出处">
          <p>原文地址：<a href="http://www.zoucz.com/blog/2016/02/17/npm-package/">http://www.zoucz.com/blog/2016/02/17/npm-package/</a>，<a href="http://www.zoucz.com/blog/2016/02/17/npm-package/#footer-nav-on">参与评论</a></p>
          <img src="http://www.zoucz.com/blogimgs/avatar150.png">
        </div>
        <h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>本文档的内容是package.json配置里边的属性含义。package.json必须是一个严格的json文件，而不仅仅是js里边的一个对象。其中很多属性可以通过npm-config来生成。   </p>
<h1 id="name"><a href="#name" class="headerlink" title="name"></a>name</h1><p>package.json中最重要的属性是name和version两个属性，这两个属性是必须要有的，否则模块就无法被安装，这两个属性一起形成了一个npm模块的唯一标识符。模块中内容变更的同时，模块版本也应该一起变化。<br>name属性就是你的模块名称，下面是一些命名规则:<br>name必须小于等于214个字节，包括前缀名称在内（如 xxx/xxxmodule）。    </p>
<ul>
<li>name不能以”_”或”.”开头    </li>
<li>不能含有大写字母    </li>
<li>name会成为url的一部分，不能含有url非法字符   </li>
</ul>
<p>下面是官网文档的一些建议：   </p>
<ul>
<li>不要使用和node核心模块一样的名称     </li>
<li>name中不要含有”js”和”node”。 It’s assumed that it’s js, since you’re writing a package.json file, and you can specify the engine using the “engines” field. (See below.) </li>
<li>name属性会成为模块url、命令行中的一个参数或者一个文件夹名称，任何非url安全的字符在name中都不能使用，也不能以”_”或”.”开头 </li>
<li>name属性也许会被写在require()的参数中，所以最好取个简短而语义化的值。</li>
<li>创建一个模块前可以先到后边的网址查查name是否已经被占用. <a href="https://www.npmjs.com/" target="_blank" rel="external">https://www.npmjs.com/</a>    </li>
</ul>
<p>name属性可以有一些前缀如 e.g. @myorg/mypackage.在npm-scope(7)的文档中可以看到详细说明    </p>
<h1 id="version"><a href="#version" class="headerlink" title="version"></a>version</h1><p>version必须可以被npm依赖的一个node-semver模块解析。具体规则见下面的dependencies模块    </p>
<h1 id="description"><a href="#description" class="headerlink" title="description"></a>description</h1><p>一个描述，方便别人了解你的模块作用，搜索的时候也有用。    </p>
<h1 id="keywords"><a href="#keywords" class="headerlink" title="keywords"></a>keywords</h1><p>一个字符串数组，方便别人搜索到本模块    </p>
<h1 id="homepage"><a href="#homepage" class="headerlink" title="homepage"></a>homepage</h1><p>项目主页url<br><strong>注意:</strong> 这个项目主页url和url属性不同，如果你填写了url属性，npm注册工具会认为你把项目发布到其他地方了，获取模块的时候不会从npm官方仓库获取，而是会重定向到url属性配置的地址。<br>（原文档中用了 spit(吐)这个单词，作者表示他不是在开玩笑:）    </p>
<h1 id="bugs"><a href="#bugs" class="headerlink" title="bugs"></a>bugs</h1><p>填写一个bug提交地址或者一个邮箱，被你的模块坑到的人可以通过这里吐槽，例如：    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123; &quot;url&quot; : &quot;https://github.com/owner/project/issues&quot;</div><div class="line">, &quot;email&quot; : &quot;project@hostname.com&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>url和email可以任意填或不填，如果只填一个，可以直接写成一个字符串而不是对象。如果填写了url，npm bugs命令会使用这个url。    </p>
<h1 id="license"><a href="#license" class="headerlink" title="license"></a>license</h1><p>你应该为你的模块制定一个协议，让用户知道他们有何权限来使用你的模块，以及使用该模块有哪些限制。最简单的，例如你用BSD-3-Clause 或 MIT之类的协议，如下：<br>{ “license” : “BSD-3-Clause” }<br>你可以在<a href="https://spdx.org/licenses/" target="_blank" rel="external">https://spdx.org/licenses/ </a>这个地址查阅协议列表 。    </p>
<h1 id="和用户相关的属性-author-contributors"><a href="#和用户相关的属性-author-contributors" class="headerlink" title="和用户相关的属性: author, contributors"></a>和用户相关的属性: author, contributors</h1><p>“author”是一个码农， “contributors”是一个码农数组。 “person”是一个有一些描述属性的对象，如下 like this:   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&#123; &quot;name&quot; : &quot;Barney Rubble&quot;</div><div class="line">, &quot;email&quot; : &quot;b@rubble.com&quot;</div><div class="line">, &quot;url&quot; : &quot;http://barnyrubble.tumblr.com/&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>也可以按如下格式缩写，npm会帮着转换:<br>“Barney Rubble <a href="&#109;&#97;&#x69;&#x6c;&#116;&#x6f;&#58;&#98;&#64;&#114;&#x75;&#x62;&#x62;&#108;&#x65;&#46;&#99;&#111;&#x6d;">&#98;&#64;&#114;&#x75;&#x62;&#x62;&#108;&#x65;&#46;&#99;&#111;&#x6d;</a> (<a href="http://barnyrubble.tumblr.com/" target="_blank" rel="external">http://barnyrubble.tumblr.com/</a>)”<br>email和url属性实际上都是可以省略的。描述用户信息的还有一个”maintainers”（维护者）属性。   </p>
<h1 id="files"><a href="#files" class="headerlink" title="files"></a>files</h1><p>“files”属性的值是一个数组，内容是模块下文件名或者文件夹名，如果是文件夹名，则文件夹下所有的文件也会被包含进来（除非文件被另一些配置排除了）<br>你也可以在模块根目录下创建一个”.npmignore”文件（windows下无法直接创建以”.”开头的文件，使用linux命令行工具创建如git bash），写在这个文件里边的文件即便被写在files属性里边也会被排除在外，这个文件的写法”.gitignore”类似。 </p>
<h1 id="main"><a href="#main" class="headerlink" title="main"></a>main</h1><p>main属性指定了程序的主入口文件。意思是，如果你的模块被命名为foo，用户安装了这个模块并通过require(“foo”)来使用这个模块，那么require返回的内容就是main属性指定的文件中 module.exports指向的对象。<br>它应该指向模块根目录下的一个文件。对大对数模块而言，这个属性更多的是让模块有一个主入口文件，然而很多模块并不写这个属性。   </p>
<h1 id="bin"><a href="#bin" class="headerlink" title="bin"></a>bin</h1><p>很多模块有一个或多个需要配置到PATH路径下的可执行模块，npm让这个工作变得十分简单（实际上npm本身也是通过bin属性安装为一个可执行命令的）<br>如果要用npm的这个功能，在package.json里边配置一个bin属性。bin属性是一个已命令名称为key，本地文件名称为value的map如下：   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123; &quot;bin&quot; : &#123; &quot;myapp&quot; : &quot;./cli.js&quot; &#125; &#125;</div></pre></td></tr></table></figure>
<p>模块安装的时候，若是全局安装，则npm会为bin中配置的文件在bin目录下创建一个软连接（对于windows系统，默认会在C:\Users\username\AppData\Roaming\npm目录下），若是局部安装，则会在项目内的./node_modules/.bin/目录下创建一个软链接。<br>因此，按上面的例子，当你安装myapp的时候，npm就会为cli.js在/usr/local/bin/myapp路径创建一个软链接。<br>如果你的模块只有一个可执行文件，并且它的命令名称和模块名称一样，你可以只写一个字符串来代替上面那种配置，例如：    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123; &quot;name&quot;: &quot;my-program&quot;</div><div class="line">, &quot;version&quot;: &quot;1.2.5&quot;</div><div class="line">, &quot;bin&quot;: &quot;./path/to/program&quot; &#125;</div></pre></td></tr></table></figure>
<p>作用和如下写法相同:   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123; &quot;name&quot;: &quot;my-program&quot;</div><div class="line">, &quot;version&quot;: &quot;1.2.5&quot;</div><div class="line">, &quot;bin&quot; : &#123; &quot;my-program&quot; : &quot;./path/to/program&quot; &#125; &#125;</div></pre></td></tr></table></figure>
<h1 id="man"><a href="#man" class="headerlink" title="man"></a>man</h1><p>制定一个或通过数组制定一些文件来让linux下的man命令查找文档地址。<br>如果只有一个文件被指定的话，安装后直接使用man+模块名称，而不管man指定的文件的实际名称。例如:   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123; &quot;name&quot; : &quot;foo&quot;</div><div class="line">, &quot;version&quot; : &quot;1.2.3&quot;</div><div class="line">, &quot;description&quot; : &quot;A packaged foo fooer for fooing foos&quot;</div><div class="line">, &quot;main&quot; : &quot;foo.js&quot;</div><div class="line">, &quot;man&quot; : &quot;./man/doc.1&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>通过man foo命令会得到 ./man/doc.1 文件的内容。<br>如果man文件名称不是以模块名称开头的，安装的时候会给加上模块名称前缀。因此，下面这段配置：   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123; &quot;name&quot; : &quot;foo&quot;</div><div class="line">, &quot;version&quot; : &quot;1.2.3&quot;</div><div class="line">, &quot;description&quot; : &quot;A packaged foo fooer for fooing foos&quot;</div><div class="line">, &quot;main&quot; : &quot;foo.js&quot;</div><div class="line">, &quot;man&quot; : [ &quot;./man/foo.1&quot;, &quot;./man/bar.1&quot; ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>会创建一些文件来作为man foo和man foo-bar命令的结果。<br>man文件必须以数字结尾，或者如果被压缩了，以.gz结尾。数字表示文件将被安装到man的哪个部分。   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123; &quot;name&quot; : &quot;foo&quot;</div><div class="line">, &quot;version&quot; : &quot;1.2.3&quot;</div><div class="line">, &quot;description&quot; : &quot;A packaged foo fooer for fooing foos&quot;</div><div class="line">, &quot;main&quot; : &quot;foo.js&quot;</div><div class="line">, &quot;man&quot; : [ &quot;./man/foo.1&quot;, &quot;./man/foo.2&quot; ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>会创建 man foo 和 man 2 foo 两条命令。   </p>
<h1 id="directories"><a href="#directories" class="headerlink" title="directories"></a>directories</h1><p>CommonJs通过directories来制定一些方法来描述模块的结构，看看npm的package.json文件<a href="https://registry.npmjs.org/npm/latest" target="_blank" rel="external">https://registry.npmjs.org/npm/latest</a> ，可以发现里边有这个字段的内容。<br><img src="http://zoucz.com/blogimgs/2016-02-16/1455624810992.png" alt=""><br>目前这个配置没有任何作用，将来可能会整出一些花样来。   </p>
<h2 id="directories-lib"><a href="#directories-lib" class="headerlink" title="directories.lib"></a>directories.lib</h2><p>告诉用户模块中lib目录在哪，这个配置目前没有任何作用，但是对使用模块的人来说是一个很有用的信息。    </p>
<h2 id="directories-bin"><a href="#directories-bin" class="headerlink" title="directories.bin"></a>directories.bin</h2><p>如果你在这里指定了bin目录，这个配置下面的文件会被加入到bin路径下，如果你已经在package.json中配置了bin目录，那么这里的配置将不起任何作用。  </p>
<h2 id="directories-man"><a href="#directories-man" class="headerlink" title="directories.man"></a>directories.man</h2><p>指定一个目录，目录里边都是man文件，这是一种配置man文件的语法糖。   </p>
<h2 id="directories-doc"><a href="#directories-doc" class="headerlink" title="directories.doc"></a>directories.doc</h2><p>在这个目录里边放一些markdown文件，可能最终有一天它们会被友好的展现出来（应该是在npm的网站上）   </p>
<h2 id="directories-example"><a href="#directories-example" class="headerlink" title="directories.example"></a>directories.example</h2><p>放一些示例脚本，或许某一天会有用 - -！   </p>
<h1 id="repository"><a href="#repository" class="headerlink" title="repository"></a>repository</h1><p>指定一个代码存放地址，对想要为你的项目贡献代码的人有帮助。像这样：   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&quot;repository&quot; :</div><div class="line">  &#123; &quot;type&quot; : &quot;git&quot;</div><div class="line">  , &quot;url&quot; : &quot;https://github.com/npm/npm.git&quot;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">&quot;repository&quot; :</div><div class="line">  &#123; &quot;type&quot; : &quot;svn&quot;</div><div class="line">  , &quot;url&quot; : &quot;https://v8.googlecode.com/svn/trunk/&quot;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>若你的模块放在GitHub, GitHub gist, Bitbucket, or GitLab的仓库里，npm install的时候可以使用缩写标记来完成：    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&quot;repository&quot;: &quot;npm/npm&quot;</div><div class="line"></div><div class="line">&quot;repository&quot;: &quot;gist:11081aaa281&quot;</div><div class="line"></div><div class="line">&quot;repository&quot;: &quot;bitbucket:example/repo&quot;</div><div class="line"></div><div class="line">&quot;repository&quot;: &quot;gitlab:another/repo&quot;</div></pre></td></tr></table></figure>
<h1 id="scripts"><a href="#scripts" class="headerlink" title="scripts"></a>scripts</h1><p>scripts属性是一个对象，里边指定了项目的生命周期个各个环节需要执行的命令。key是生命周期中的事件，value是要执行的命令。<br>具体的内容有 install  start  stop 等，详见<a href="https://docs.npmjs.com/misc/scripts" target="_blank" rel="external"> https://docs.npmjs.com/misc/scripts</a>     </p>
<h1 id="config"><a href="#config" class="headerlink" title="config"></a>config</h1><p>用来设置一些项目不怎么变化的项目配置，例如port等。<br>用户用的时候可以使用如下用法：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http.createServer(...).listen(process.env.npm_package_config_port)</div></pre></td></tr></table></figure>
<p>可以通过npm config set foo:port 80来修改config。详见<a href="https://docs.npmjs.com/misc/config" target="_blank" rel="external">https://docs.npmjs.com/misc/config</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&#123; &quot;name&quot; : &quot;foo&quot;</div><div class="line">, &quot;config&quot; : &#123; &quot;port&quot; : &quot;8080&quot; &#125; &#125;</div></pre></td></tr></table></figure>
<h1 id="dependencies"><a href="#dependencies" class="headerlink" title="dependencies"></a>dependencies</h1><p>dependencies属性是一个对象，配置模块依赖的模块列表，key是模块名称，value是版本范围，版本范围是一个字符，可以被一个或多个空格分割。<br>dependencies也可以被指定为一个git地址或者一个压缩包地址。<br>不要把测试工具或transpilers写到dependencies中。 下面是一些写法，详见<a href="https://docs.npmjs.com/misc/semver" target="_blank" rel="external">https://docs.npmjs.com/misc/semver </a>    </p>
<ul>
<li>version 精确匹配版本   </li>
<li>>version 必须大于某个版本   </li>
<li>>=version 大于等于   </li>
<li>&lt;version 小于      </li>
<li>&lt;=versionversion 小于     </li>
<li>~version “约等于”，具体规则详见semver文档   </li>
<li>^version “兼容版本”具体规则详见semver文档   </li>
<li>1.2.x 仅一点二点几的版本   </li>
<li>http://… 见下面url作为denpendencies的说明   </li>
<li><ul>
<li>任何版本   </li>
</ul>
</li>
<li>“”  空字符，和*相同   </li>
<li>version1 - version2 相当于 &gt;=version1 &lt;=version2.   </li>
<li>range1 || range2  范围1和范围2满足任意一个都行   </li>
<li>git…  见下面git url作为denpendencies的说明   </li>
<li>user/repo See  见下面GitHub仓库的说明   </li>
<li>tag  发布的一个特殊的标签，见npm-tag的文档 <a href="https://docs.npmjs.com/getting-started/using-tags" target="_blank" rel="external">https://docs.npmjs.com/getting-started/using-tags</a>   </li>
<li>path/path/path  见下面本地模块的说明<br>下面的写法都是可以的:   </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&#123; &quot;dependencies&quot; :</div><div class="line">  &#123; &quot;foo&quot; : &quot;1.0.0 - 2.9999.9999&quot;</div><div class="line">  , &quot;bar&quot; : &quot;&gt;=1.0.2 &lt;2.1.2&quot;</div><div class="line">  , &quot;baz&quot; : &quot;&gt;1.0.2 &lt;=2.3.4&quot;</div><div class="line">  , &quot;boo&quot; : &quot;2.0.1&quot;</div><div class="line">  , &quot;qux&quot; : &quot;&lt;1.0.0 || &gt;=2.3.1 &lt;2.4.5 || &gt;=2.5.2 &lt;3.0.0&quot;</div><div class="line">  , &quot;asd&quot; : &quot;http://asdf.com/asdf.tar.gz&quot;</div><div class="line">  , &quot;til&quot; : &quot;~1.2&quot;</div><div class="line">  , &quot;elf&quot; : &quot;~1.2.3&quot;</div><div class="line">  , &quot;two&quot; : &quot;2.x&quot;</div><div class="line">  , &quot;thr&quot; : &quot;3.3.x&quot;</div><div class="line">  , &quot;lat&quot; : &quot;latest&quot;</div><div class="line">  , &quot;dyl&quot; : &quot;file:../dyl&quot;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="URLs-as-Dependencies"><a href="#URLs-as-Dependencies" class="headerlink" title="URLs as Dependencies"></a>URLs as Dependencies</h1><p>在版本范围的地方可以写一个url指向一个压缩包，模块安装的时候会把这个压缩包下载下来安装到模块本地。   </p>
<h1 id="Git-URLs-as-Dependencies"><a href="#Git-URLs-as-Dependencies" class="headerlink" title="Git URLs as Dependencies"></a>Git URLs as Dependencies</h1><p>Git url可以像下面一样:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">git://github.com/user/project.git#commit-ish</div><div class="line">git+ssh://user@hostname:project.git#commit-ish</div><div class="line">git+ssh://user@hostname/project.git#commit-ish</div><div class="line">git+http://user@hostname/project/blah.git#commit-ish</div><div class="line">git+https://user@hostname/project/blah.git#commit-ish</div></pre></td></tr></table></figure>
<p>commit-ish 可以是任意标签，哈希值，或者可以检出的分支，默认是master分支。   </p>
<h1 id="GitHub-URLs"><a href="#GitHub-URLs" class="headerlink" title="GitHub URLs"></a>GitHub URLs</h1><p>支持github的 username/modulename 的写法，#后边可以加后缀写明分支hash或标签：   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;name&quot;: &quot;foo&quot;,</div><div class="line">  &quot;version&quot;: &quot;0.0.0&quot;,</div><div class="line">  &quot;dependencies&quot;: &#123;</div><div class="line">    &quot;express&quot;: &quot;visionmedia/express&quot;,</div><div class="line">    &quot;mocha&quot;: &quot;visionmedia/mocha#4727d357ea&quot;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Local-Paths"><a href="#Local-Paths" class="headerlink" title="Local Paths"></a>Local Paths</h1><p>npm2.0.0版本以上可以提供一个本地路径来安装一个本地的模块，通过npm install xxx –save 来安装，格式如下：   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">../foo/bar</div><div class="line">~/foo/bar</div><div class="line">./foo/bar</div><div class="line">/foo/bar</div></pre></td></tr></table></figure>
<p>package.json 生成的相对路径如下:   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;name&quot;: &quot;baz&quot;,</div><div class="line">  &quot;dependencies&quot;: &#123;</div><div class="line">    &quot;bar&quot;: &quot;file:../foo/bar&quot;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这种属性在离线开发或者测试需要用npm install的情况，又不想自己搞一个npm server的时候有用，但是发布模块到公共仓库时不应该使用这种属性。   </p>
<h1 id="devDependencies"><a href="#devDependencies" class="headerlink" title="devDependencies"></a>devDependencies</h1><p>如果有人想要下载并使用你的模块，也许他们并不希望或需要下载一些你在开发过程中使用的额外的测试或者文档框架。<br>在这种情况下，最好的方法是把这些依赖添加到devDependencies属性的对象中。<br>这些模块会在npm link或者npm install的时候被安装，也可以像其他npm配置一样被管理，详见npm的config文档。<br>对于一些跨平台的构建任务，例如把CoffeeScript编译成JavaScript，就可以通过在package.json的script属性里边配置prepublish脚本来完成这个任务，然后需要依赖的coffee-script模块就写在devDependencies属性种。<br>例如:   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&#123; &quot;name&quot;: &quot;ethopia-waza&quot;,</div><div class="line">  &quot;description&quot;: &quot;a delightfully fruity coffee varietal&quot;,</div><div class="line">  &quot;version&quot;: &quot;1.2.3&quot;,</div><div class="line">  &quot;devDependencies&quot;: &#123;</div><div class="line">    &quot;coffee-script&quot;: &quot;~1.6.3&quot;</div><div class="line">  &#125;,</div><div class="line">  &quot;scripts&quot;: &#123;</div><div class="line">    &quot;prepublish&quot;: &quot;coffee -o lib/ -c src/waza.coffee&quot;</div><div class="line">  &#125;,</div><div class="line">  &quot;main&quot;: &quot;lib/waza.js&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>prepublish脚本会在发布之前运行，因此用户在使用之前就不用再自己去完成编译的过程了。在开发模式下，运行npm install也会执行这个脚本（见npm script文档），因此可以很方便的调试。   </p>
<h1 id="peerDependencies"><a href="#peerDependencies" class="headerlink" title="peerDependencies"></a>peerDependencies</h1><p>有时候做一些插件开发，比如grunt等工具的插件，它们往往是在grunt的某个版本的基础上开发的，而在他们的代码中并不会出现require(“grunt”)这样的依赖，dependencies配置里边也不会写上grunt的依赖，为了说明此模块只能作为插件跑在宿主的某个版本范围下，可以配置peerDependencies：   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;name&quot;: &quot;tea-latte&quot;,</div><div class="line">  &quot;version&quot;: &quot;1.3.5&quot;,</div><div class="line">  &quot;peerDependencies&quot;: &#123;</div><div class="line">    &quot;tea&quot;: &quot;2.x&quot;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面这个配置确保再npm install的时候tea-latte会和2.x版本的tea一起安装，而且它们两个的依赖关系是同级的：<br>├── tea-latte@1.3.5<br>└── tea@2.2.0<br>这个配置的目的是让npm知道，如果要使用此插件模块，请确保安装了兼容版本的宿主模块。   </p>
<h1 id="bundledDependencies"><a href="#bundledDependencies" class="headerlink" title="bundledDependencies"></a>bundledDependencies</h1><p>上面的单词少个d，写成bundleDependencies也可以。<br>指定发布的时候会被一起打包的模块。   </p>
<h1 id="optionalDependencies"><a href="#optionalDependencies" class="headerlink" title="optionalDependencies"></a>optionalDependencies</h1><p>如果一个依赖模块可以被使用， 同时你也希望在该模块找不到或无法获取时npm继续运行，你可以把这个模块依赖放到optionalDependencies配置中。这个配置的写法和dependencies的写法一样，不同的是这里边写的模块安装失败不会导致npm install失败。<br>当然，这种模块就需要你自己在代码中处理模块确实的情况了，例如：   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">try &#123;</div><div class="line">  var foo = require(&apos;foo&apos;)</div><div class="line">  var fooVersion = require(&apos;foo/package.json&apos;).version</div><div class="line">&#125; catch (er) &#123;</div><div class="line">  foo = null</div><div class="line">&#125;</div><div class="line">if ( notGoodFooVersion(fooVersion) ) &#123;</div><div class="line">  foo = null</div><div class="line">&#125;</div><div class="line"></div><div class="line">// .. then later in your program ..</div><div class="line"></div><div class="line">if (foo) &#123;</div><div class="line">  foo.doFooThings()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>optionalDependencies 中的配置会覆盖dependencies中的配置，最好只在一个地方写。   </p>
<h1 id="engines"><a href="#engines" class="headerlink" title="engines"></a>engines</h1><p>你可以指定项目运行的node版本范围，如下：<br>{ “engines” : { “node” : “&gt;=0.10.3 &lt;0.12” } }<br>和dependencies一样，如果你不指定版本范围或者指定为*，任何版本的node都可以。<br>也可以指定一些npm版本可以正确的安装你的模块，例如：<br>{ “engines” : { “npm” : “~1.0.20” } }<br>要注意的是，除非你设置了engine-strict属性，engines属性是仅供参考的。   </p>
<h1 id="engineStrict"><a href="#engineStrict" class="headerlink" title="engineStrict"></a>engineStrict</h1><p>注意：这个属性已经弃用，将在npm 3.0.0 版本干掉。   </p>
<h1 id="os"><a href="#os" class="headerlink" title="os"></a>os</h1><p>可以指定你的模块只能在哪个操作系统上跑：<br>“os” : [ “darwin”, “linux” ]<br>也可以指定黑名单而不是白名单：<br>“os” : [ “!win32” ]<br>服务的操作系统是由process.platform来判断的，这个属性允许黑白名单同时存在，虽然没啥必要这样搞…   </p>
<h1 id="cpu"><a href="#cpu" class="headerlink" title="cpu"></a>cpu</h1><p>限制模块只能在某某cpu架构下运行<br>“cpu” : [ “x64”, “ia32” ]<br>同样可以设置黑名单:<br>“cpu” : [ “!arm”, “!mips” ]<br>cpu架构通过 process.arch 判断   </p>
<h1 id="preferGlobal"><a href="#preferGlobal" class="headerlink" title="preferGlobal"></a>preferGlobal</h1><p>如果您的软件包主要用于安装到全局的命令行应用程序，那么该值设置为true ，如果它被安装在本地，则提供一个警告。实际上该配置并没有阻止用户把模块安装到本地，只是防止该模块被错误的使用引起一些问题。   </p>
<h1 id="private"><a href="#private" class="headerlink" title="private"></a>private</h1><p>如果这个属性被设置为true，npm将拒绝发布它，这是为了防止一个私有模块被无意间发布出去。如果你只想让模块被发布到一个特定的npm仓库，如一个内部的仓库，可与在下面的publishConfig中配置仓库参数。  </p>
<h1 id="publishConfig"><a href="#publishConfig" class="headerlink" title="publishConfig"></a>publishConfig</h1><p>这个配置是会在模块发布时用到的一些值的集合。如果你不想模块被默认被标记为最新的，或者默认发布到公共仓库，可以在这里配置tag或仓库地址。  </p>
<h1 id="DEFAULT-VALUES"><a href="#DEFAULT-VALUES" class="headerlink" title="DEFAULT VALUES"></a>DEFAULT VALUES</h1><p>npm设置了一些默认参数，如：<br>“scripts”: {“start”: “node server.js”}<br>如果模块根目录下有一个server.js文件，那么npm start会默认运行这个文件。<br>“scripts”:{“preinstall”: “node-gyp rebuild”}<br>如果模块根目录下有binding.gyp, npm将默认用node-gyp来编译preinstall的脚本<br>“contributors”: […]<br>若模块根目录下有AUTHORS 文件，则npm会按Name <email> (url)格式解析每一行的数据添加到contributors中，可以用#添加行注释   </email></p>
<h1 id="参考文档列表-https-docs-npmjs-com"><a href="#参考文档列表-https-docs-npmjs-com" class="headerlink" title="参考文档列表(https://docs.npmjs.com/)"></a>参考文档列表(<a href="https://docs.npmjs.com/" target="_blank" rel="external">https://docs.npmjs.com/</a>)</h1><p>semver(7)<br>npm-init(1)<br>npm-version(1)<br>npm-config(1)<br>npm-config(7)<br>npm-help(1)<br>npm-faq(7)<br>npm-install(1)<br>npm-publish(1)<br>npm-rm(1)   </p>

        <p class="this-page-link">本文链接：<a href="http://www.zoucz.com/blog/2016/02/17/npm-package/">http://www.zoucz.com/blog/2016/02/17/npm-package/</a></p>
        <p><a class="to-comments" href="http://www.zoucz.com/blog/2016/02/17/npm-package/#comments">☞ 参与评论</a></p>
      </div>
    </div>
    
    <div class="copyright" itemscope itemtype="http://schema.org/ProfilePage">
	<ul>
		<li>作者:  <a href="/about/" itemprop="name">邹成卓 (zoucz)</a></li>
		<li>发表日期:  2016-02-17 09:28:04</li>
		<li>文章分类: 
	<a class="category-link" href="/blog/categories/nodejs/">nodejs</a>

</li>
		<li>文章标签: 
<a class="article-tag-link" href="/blog/tags/nodejs/">nodejs</a>, <a class="article-tag-link" href="/blog/tags/npm/">npm</a>
</li>
		<li>版权声明: 自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">创意共享3.0许可证</a>）</li>
		<li>最后编辑时间: 2016-12-22 00:42:00</li>
		<li>Feed订阅: <a href="/atom.xml"><i class="icon">&#x25c8;</i></a></li>
	</ul>
	<a href="/about/"><img src="/blogimgs/avatar150.png" /></a>
</div>
    <div class="share-article clearfix">
    
    <div class="ds-share" data-thread-key="npm-package" data-title="npm package.json属性详解" data-images="" data-content="概述本文档的内容是package.json配置里边的属性含义。package.json必须是一个严格的json文件，而不仅仅是js里边的一个对象。其中很多属性可以通过npm-config来生成。   namepackag..." data-url="http://www.zoucz.com/blog/2016/02/17/npm-package/">
      <div class="ds-share-inline">
  <ul  class="ds-share-icons-16">
    <li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li>
    <li> <a class="ds-weibo" href="javascript:void(0);" data-service="weibo">新浪微博</a> </li>
    <li> <a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a> </li>
  </ul>
  <div class="ds-share-icons-more">
  </div>
</div>
    </div>
    </div>
    <em class="arrow-expend icon">&#xe618;
      <ul>
        <li><a href="/entry/">博客</a></li>
        <li><a href="/message/">留言</a></li>
        <li><a href="/about/">关于</a></li>
        <li><a href="/demo/">实验室</a></li>
        <li><a href="/comments/">最近评论</a></li>
        <li><a href="/friends/">友情链接</a></li>
      </ul>
    </em>
  </div>
  <div class="post-relative">
<div class="page-relative">
  
    <a href="/blog/2016/02/17/node-cmd-app/" class="post-prev">
      <i class="icon">&#x261c;</i>
      
        <b>nodejs模块发布及命令行程序开发</b>
      
    </a>
  
  
    <a href="/blog/2016/02/05/node-process/" class="post-next">
      <b>nodejs process模块api</b>
      <i class="icon">&#xe602;</i>
    </a>
  
</div>


<div class="page-relative-fixed">
  
  <a href="/blog/2016/02/17/node-cmd-app/" class="prev" title="nodejs模块发布及命令行程序开发">
    <i class="icon">&#xe600;</i>
    
    <b>nodejs模块发布及命令行程序开发</b>
    
  </a>
  
  
  <a href="/blog/2016/02/05/node-process/" class="next" title="nodejs process模块api">
    <i class="icon">&#x261e;</i>
    <b>nodejs process模块api</b>
  </a>
  
</div>
</div>
</div>
<div class="sidebar">
	<div class="func-btns func-btns-up">
    <span class="func-item">
        <i class="func-nav icon">&#xe618;<span>目录</span></i>
        <div>
          <i class="left-arrow"></i><i class="left-arrow-clone"></i>
          <a href="javascript:void(0);" onclick="return false;">显示目录</a>
        </div>
    </span>
    <span class="func-item">
        <i class="func-font icon">&#xe604;<span>设置</span></i>
        <div class="font-choose-box">
          <i class="left-arrow"></i><i class="left-arrow-clone"></i>
          <div class="font-choose bg-choose">
            <a href="javascript:void(0)" onclick="return false;" class="bg-type bg-type-sun font-type-song"><i class="icon">&#xe61a;</i></a>
            <a href="javascript:void(0)" onclick="return false;" class="bg-type bg-type-moon font-type-hei"><i class="icon">&#xe619;</i></a>
          </div>
          <div class="font-choose">
            <a href="javascript:void(0)" onclick="return false;" class="font-type font-type-song">黑体</a>
            <a href="javascript:void(0)" onclick="return false;" class="font-type font-type-hei">宋体</a>
          </div>
        </div>
    </span>
    <span class="func-item">
        <a href="" target="_blank"><i class="func-fb icon">博<span>分享</span></i></a>
        <div><i class="left-arrow"></i><i class="left-arrow-clone"></i>
          <p class="seperator sharecanvas"><a href="javascript: void(0);">截屏分享</a></p>
          <p><a href="" target="_blank">微博关注</a></p>
        </div>
    </span>
    <span class="func-item">
        <i class="func-about icon">&#x263b;<span>关于</span></i>
        <div>
          <i class="left-arrow"></i><i class="left-arrow-clone"></i>
          <p><a href="/about/" class="func-about-link" target="_blank">关于作者</a></p>
          <div id="followMeOnWeibo"></div>
        </div>
    </span>
	</div>
	<div class="func-btns">
    <span class="func-item">
        <a href="/" target="_blank"><i class="func-rss icon">&#xe603;<span>实验</span></i></a>
        <div><i class="left-arrow"></i><i class="left-arrow-clone"></i>
          <p class="seperator"><a href="/" target="_blank">Demo平台</a></p>
          <p><a href="/" target="_blank">Snippet应用</a></p>
        </div>
    </span>
    <span class="func-item">
        <i class="func-fb icon">&#x2121;<span>留言</span></i>
        <div><i class="left-arrow"></i><i class="left-arrow-clone"></i>
          <p class="seperator"><a href="/message/" target="_blank">给我留言</a></p>
          <p><a href="/comments/" target="_blank">近期留言</a></p>
        </div>
    </span>
    <span class="func-item">
        <a href="/friends/" target="_blank"><i class="func-rss icon">&#xe601;<span>友链</span></i></a>
        <div><i class="left-arrow"></i><i class="left-arrow-clone"></i>
          <a href="/friends/" target="_blank">友情链接</a>
        </div>
    </span>
    <span class="func-item">
        <a href="/atom.xml" target="_blank"><i class="func-rss icon">&#x25c8;<span>订阅</span></i></a>
        <div><i class="left-arrow"></i><i class="left-arrow-clone"></i><a href="/atom.xml" target="_blank">订阅我吧！</a></div>
    </span>
	</div>
</div>

<div class="single-page-footer">
<div class="footer">
	<div class="footer-wraper">
		<div class="footer-copostntent">
			<div class="footer-nav">
	<a href="javascript: void(0);" class="ds-thread-count disqus-comment-count"
	   data-thread-key="npm-package"
	   data-disqus-identifier="npm-package">评论内容</a>
	<a href="javascript: void(0);" id="footer-nav-on">相关文章</a>
	<a href="/friends">友情链接</a>
</div>
<div class="nav-detail">
	<div>
		



<div class="ds-thread" data-thread-key="npm-package" data-title="npm package.json属性详解" data-url="http://www.zoucz.com/blog/2016/02/17/npm-package/" data-name="zoucz">
	<div class="ds-loading">
		<img src="/blogimgs/loading.gif" alt="loading..."/>
		<p>这网速真是弱爆了...客官稍等,评论还在加载~</p>
	</div>
</div>





	</div>
	<div style="display:block;">
		<div class="relative-to-comment"><span>（点击评论）</span>古今多少事，都付笑谈中！</div>
		<div class="relative-wrapper">
	<div class="relative-article">
		
		<ul>
			<li>
				<span>2016-12-22 » </span><a href="/blog/2016/12/22/nodejs-pm2/">nodejs进程管理工具pm2</a>
				<div>nodejs存在的问题问题nodejs作为一种单线程、单进程运行的程序，如果只是简单的使用的话，存在...</div>
			</li>
			
			<li>
				<span>2016-08-02 » </span><a href="/blog/2016/08/02/nodejs-unittest-mochajs/">javascript单元测试框架mochajs详解</a>
				<div>关于单元测试的想法对于一些比较重要的项目，每次更新代码之后总是要自己测好久，担心一旦上线出了问题影响...</div>
			</li>
			
			<li>
				<span>2016-06-28 » </span><a href="/blog/2016/06/28/nodejs-get-time/">nodejs中获取时间戳、时间差</a>
				<div>Nodejs中获取时间戳的方法有很多种，例如：new Date().getTime()Date.no...</div>
			</li>
			
			<li>
				<span>2016-06-27 » </span><a href="/blog/2016/06/27/npm-shrinkwrap/">理解npm-shrinkwrap</a>
				<div>本文转自美团技术博客，原文：http://tech.meituan.com/npm-shrinkwr...</div>
			</li>
			
		</ul>
	</div>
</div>
		<a href="/entry/" class="relative-to-comment-wrapper"><div class="relative-to-comment">回到首页</div></a>
	</div>
	<div class="friends-box">
		<ul>
			
			<li><a href="h" target="_blank">小胡子哥的博客</a> » <span>0</span></li>
			
			<li><a href="/friends/">申请友链 »</a></li>
		</ul>
	</div>
</div>
			<div class="website-info">
	<!--<span>Copyright &copy;2013-2016 <small><a href="http://www.miitbeian.gov.cn/" about="_blank">湘ICP备14007107号-1</a></small></span>-->
	<a href="/about#contact">联系方式</a>
</div>
		</div>
	</div>
</div>
</div>
<div class="tools-wrapper">
	<a class="gotop icon" href="#" title="回到顶部">&#x2191;</a>
	<a class="wechart icon">&#xe60d;<span><img src="/wechart.png" title="扫码添加邹成卓微信"/> </span></a>
	<a class="hash-to-comments icon" title="我要评论">&#x2121;</a>
</div>
<div class="fixerr">纠错模式</div>
</body>
</html>